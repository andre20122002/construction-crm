<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>–ù–∞–∫–ª–∞–¥–Ω–∞ ‚Ññ{{ order.id }}</title>
    <style>
        @font-face {
            font-family: 'UkrFont';
            src: url(data:font/ttf;base64,{{ font_base64 }});
        }

        body { 
            font-family: 'UkrFont', sans-serif; 
            font-size: 14px; 
            padding: 40px;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
        .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 20px; }
        .title { font-size: 26px; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .subtitle { font-size: 14px; color: #555; }
        
        /* –Ü–Ω—Ñ–æ –±–ª–æ–∫ */
        .info-section { width: 100%; margin-bottom: 30px; }
        .info-table { width: 100%; border-collapse: collapse; }
        .info-table td { padding: 8px; vertical-align: top; }
        
        /* –°—Ç–∏–ª—ñ –∫–æ–ª–æ–Ω–æ–∫ */
        .col-sender { width: 35%; }
        .col-receiver { width: 35%; }
        .col-qr { width: 30%; text-align: right; }

        .label { font-weight: bold; color: #555; font-size: 0.9em; text-transform: uppercase; margin-bottom: 3px; display: block; }
        .value { font-size: 1.1em; line-height: 1.4; }
        
        /* QR Code */
        .qr-img { width: 110px; height: 110px; border: 1px solid #eee; padding: 5px; }
        .qr-text { font-size: 10px; color: #777; margin-top: 5px; text-transform: uppercase; }

        /* –¢–∞–±–ª–∏—Ü—è —Ç–æ–≤–∞—Ä—ñ–≤ */
        .items-table { width: 100%; border-collapse: collapse; margin-bottom: 50px; margin-top: 20px; }
        .items-table th { background-color: #f1f3f5; border: 1px solid #333; padding: 12px; text-align: center; font-weight: bold; }
        .items-table td { border: 1px solid #333; padding: 12px; text-align: center; vertical-align: middle; }
        .items-table td.left-align { text-align: left; }
        
        /* –ü—ñ–¥–ø–∏—Å–∏ */
        .signatures { width: 100%; margin-top: 80px; }
        .signatures td { width: 50%; text-align: center; font-size: 14px; vertical-align: top; padding: 0 20px; }
        .sign-line { border-top: 1px solid #333; width: 100%; margin-bottom: 10px; }
        
        /* –ö–Ω–æ–ø–∫–∏ –¥—Ä—É–∫—É */
        .no-print { margin-bottom: 30px; text-align: right; border-bottom: 1px dashed #ccc; padding-bottom: 15px; }
        .btn-print { padding: 10px 25px; font-size: 16px; background: #212529; color: white; border: none; cursor: pointer; border-radius: 5px; transition: background 0.2s; }
        .btn-print:hover { background: #000; }

        @media print {
            body { padding: 0; margin: 0; }
            .no-print { display: none; }
            .card { border: none !important; }
        }
    </style>
</head>
<body>
    
    <div class="no-print">
        <button onclick="window.print()" class="btn-print">üñ®Ô∏è –î—Ä—É–∫ / –ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ PDF</button>
        <button onclick="history.back()" style="padding: 10px 20px; font-size: 16px; background: #fff; color: #333; border: 1px solid #ccc; cursor: pointer; border-radius: 5px; margin-left: 10px;">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <div class="header">
        <div class="title">–í–∏–¥–∞—Ç–∫–æ–≤–∞ –ù–∞–∫–ª–∞–¥–Ω–∞ ‚Ññ {{ order.id }}</div>
        <div class="subtitle">–≤—ñ–¥ {{ order.created_at|date:"d.m.Y H:i" }}</div>
    </div>

    <div class="info-section">
        <table class="info-table">
            <tr>
                <!-- –í–Ü–î–ü–†–ê–í–ù–ò–ö -->
                <td class="col-sender">
                    <span class="label">–í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫:</span>
                    <div class="value">
                        {% if order.source_warehouse %}
                            <strong>{{ order.source_warehouse.name }}</strong><br>
                            <small>{{ order.source_warehouse.address }}</small>
                        {% else %}
                            <strong>{{ order.supplier_info|default:"–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ (–ó–æ–≤–Ω—ñ—à–Ω—ñ–π)" }}</strong>
                        {% endif %}
                    </div>
                </td>
                
                <!-- –û–¢–†–ò–ú–£–í–ê–ß -->
                <td class="col-receiver">
                    <span class="label">–û—Ç—Ä–∏–º—É–≤–∞—á:</span>
                    <div class="value">
                        <strong>{{ order.warehouse.name }}</strong><br>
                        <small>{{ order.warehouse.address }}</small>
                    </div>
                    <div style="margin-top: 15px;">
                        <span class="label">–°—Ç–∞—Ç—É—Å:</span>
                        <strong>{{ order.get_status_display }}</strong>
                    </div>
                </td>

                <!-- QR CODE (–ü–û–í–ï–†–ù–£–¢–û) -->
                <td class="col-qr">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data={{ request.scheme }}://{{ request.get_host }}{% url 'confirm_receipt' order.id %}" class="qr-img" />
                    <div class="qr-text">–°–∫–∞–Ω—É–≤–∞—Ç–∏ –¥–ª—è –ø—Ä–∏–π–æ–º—É</div>
                </td>
            </tr>
        </table>
    </div>

    <table class="items-table">
        <thead>
            <tr>
                <th style="width: 50px;">‚Ññ</th>
                <th>–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É</th>
                <th style="width: 120px;">–ê—Ä—Ç–∏–∫—É–ª</th>
                <th style="width: 80px;">–û–¥.</th>
                <th style="width: 100px;">–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order.items.all %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td class="left-align">
                    <span style="font-size: 1.1em; font-weight: bold;">{{ item.material.name }}</span>
                </td>
                <td>{{ item.material.article }}</td>
                <td>{{ item.material.unit }}</td>
                <td>
                    <span style="font-size: 1.2em; font-weight: bold;">{{ item.quantity|floatformat:2 }}</span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% if order.note %}
    <div style="margin-bottom: 30px; font-style: italic; color: #555;">
        <strong>–ö–æ–º–µ–Ω—Ç–∞—Ä:</strong> {{ order.note }}
    </div>
    {% endif %}

    <table class="signatures">
        <tr>
            <td>
                <div class="sign-line"></div>
                <b>–í—ñ–¥–ø—É—Å—Ç–∏–≤</b><br>
                <small>(–ü–æ—Å–∞–¥–∞, –ø—ñ–¥–ø–∏—Å, –ø—Ä—ñ–∑–≤–∏—â–µ)</small>
            </td>
            <td>
                <div class="sign-line"></div>
                <b>–û—Ç—Ä–∏–º–∞–≤</b><br>
                <small>(–ü–æ—Å–∞–¥–∞, –ø—ñ–¥–ø–∏—Å, –ø—Ä—ñ–∑–≤–∏—â–µ)</small>
            </td>
        </tr>
    </table>

    <div style="margin-top: 60px; text-align: center; font-size: 10px; color: #999;">
        –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤ —Å–∏—Å—Ç–µ–º—ñ "–ë—É–¥–°–∫–ª–∞–¥ ERP"
    </div>

</body>
</html>